<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weather API</title>
</head>

<body>
    <h2>Weather Forecast 48 Hours</h2>

    <table>
        <thead>
            <tr>
                <td>시간</td>
                <td>온도</td>
            </tr>
        </thead>
        <tbody>
        </tbody>
    </table>
    <!-- icon등은 여기 참고 https://openweathermap.org/current#list -->

    <script src="https://code.jquery.com/jquery-3.5.1.min.js" 
    integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
    crossorigin="anonymous"></script>

    <script>
        $.getJSON('https://api.openweathermap.org/data/3.0/onecall?lat=37.5683&lon=126.9778&appid=a71cf8f55278a20a0840a3e6fcba9384&units=metric', 
        function(result){
            function convertTime(ctime){
                var ot = new Date(ctime * 1000); // jQuery new Date : 밀리초로 가져온걸 가지고 보기쉽게 추출해줌
                var mon = ot.getMonth() + 1; // getMonth()는 0부터 시작하므로 +1 해줌
                var dt = ot.getDate();
                var hr = ot.getHours();
                
                return mon + '/' + dt + '  ' + hr + '시';
            }

            for(var i = 0; i < 48; i++){
                var ctime = result.hourly[i].dt;
                var ctemp = result.hourly[i].temp;
                
                var currentTime = convertTime(ctime);
                var tableHtml = '<tr>' +
                                '<td>'+currentTime+'</td>' +
                                '<td>'+ctemp+'</td>' +
                                '</tr>';
                
                $('tbody').append(tableHtml);
            }
        });
    </script>
</body>
</html>
